# Redis常问面试题
---
---
## 1. 概述
### 1.2 什么是 Redis？
redis是一个key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，包括：
- string(字符串)
- list(链表)
- set(集合)
- zset(sorted set --有序集合)
- hash（哈希类型）

这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。

在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。

### 1.3 Redis 有哪些优缺点？
1. redis的优点
(1) 速度快，因为数据存在内存中，类似于HashMap，HashMap的优势就是查找和操作的时间复杂度都是O(1)
(2) 支持丰富数据类型，支持string，list，set，sorted set，hash
(3) 支持事务，操作都是原子性，所谓的原子性就是对数据的更改要么全部执行，要么全部不执行
(4) 丰富的特性：可用于缓存，消息，按key设置过期时间，过期后将会自动删除

2. redis对比与memcached的优点
(1) memcached所有的值均是简单的字符串，redis作为其替代者，支持更为丰富的数据类型
(2) redis的速度比memcached快很多
(3) redis可以持久化其数据

3. redis的缺点
(1) 由于是内存数据库，所以，单台机器，存储的数据量，跟机器本身的内存大小。虽然redis本身有key过期策略，但是还是需要提前预估和节约内存。如果内存增长过快，需要定期删除数据。
(2) 如果进行完整重同步，由于需要生成rdb文件，并进行传输，会占用主机的CPU，并会消耗现网的带宽。不过redis2.8版本，已经有部分重同步的功能，但是还是有可能有完整重同步的。比如，新上线的备机。
(3) 修改配置文件，进行重启，将硬盘中的数据加载进内存，时间比较久。在这个过程中，redis不能提供服务。

### 1.4 为什么要用 Redis / 为什么要用缓存？
### 1.5 为什么要用 Redis 而不用 map/guava 做缓存?
### 1.6 Redis 为什么这么快？

## 2. 数据类型
### 2.1 Redis 有哪些数据类型？
### 2.2 Redis 的应用场景？

## 3. 持久化

### 3.1 什么是 Redis 持久化？
### 3.2 Redis 的持久化机制是什么？各自的优缺点？
### 3.3 如何选择合适的持久化方式
### 3.4 Redis 持久化数据和缓存怎么做扩容？
### 3.5 过期键的删除策略
### 3.6 Redis 的过期键的删除策略
### 3.7 Redis key 的过期时间和永久有效分别怎么设置？
### 3.8 我们知道通过 expire 来设置 key 的过期时间，那么对过期的数据怎么处理呢?

## 4. 内存相关

### 4.1 MySQL 里有 2000w 数据，redis 中只存 20w 的数据，如何保证 redis 中的数据都是热点数据
### 4.2 Redis 的内存淘汰策略有哪些
### 4.3 Redis 主要消耗什么物理资源？
### 4.4 Redis 的内存用完了会发生什么？
### 4.5 Redis 如何做内存优化？

## 5. 线程模型

### 5.1 Redis 线程模型

## 6. 事务

### 6.1 什么是事务？
### 6.2 Redis 事务的概念
### 6.3 Redis 事务的三个阶段
### 6.4 Redis 事务相关命令
### 6.5 事务管理（ACID）概述
### 6.6 Redis 事务支持隔离性吗
### 6.7 Redis 事务保证原子性吗，支持回滚吗
### 6.8 Redis 事务其他实现

## 7. 集群方案

### 7.1 哨兵模式
### 7.2 官方 Redis Cluster 方案(服务端路由查询)
### 7.3 基于客户端分配
### 7.4 基于代理服务器分片

## 8. Redis 主从架构

### 8.1 Redis 集群的主从复制模型是怎样的？
### 8.2 生产环境中的 redis 是怎么部署的？
### 8.3 说说 Redis 哈希槽的概念？
### 8.4 Redis 集群会有写操作丢失吗？为什么？
### 8.5 Redis 集群之间是如何复制的？
### 8.6 Redis 集群最大节点个数是多少？
### 8.7 Redis 集群如何选择数据库？

## 9. 分区

### 9.1 Redis 是单线程的，如何提高多核CPU的利用率？
### 9.2 为什么要做 Redis 分区？
### 9.3 你知道有哪些 Redis 分区实现方案？
### 9.4 Redis 分区有什么缺点？

## 10. 分布式问题

### 10.1 Redis 实现分布式锁
### 10.2 如何解决 Redis 的并发竞争 Key 问题
### 10.3 分布式 Redis 是前期做还是后期规模上来了再做好？为什么？
### 10.4 什么是 RedLock

## 11. 缓存异常

### 11.1 缓存雪崩
### 11.2 缓存穿透
### 11.3 缓存击穿
### 11.4 缓存预热
### 11.5 缓存降级
### 11.6 热点数据和冷数据
### 11.7 缓存热点 key

## 12. 常用工具

### 12.1 Redis 支持的 Java 客户端都有哪些？官方推荐用哪个？
### 12.2 Redis 和 Redisson 有什么关系？
### 12.3 Jedis 与 Redisson 对比有什么优缺点？

## 13. 其他问题

### 13.1 Redis 与 Memcached 的区别
### 13.2 如何保证缓存与数据库双写时的数据一致性？
### 13.3 Redis 常见性能问题和解决方案？
### 13.4 Redis 官方为什么不提供 Windows 版本？
### 13.5 一个字符串类型的值能存储最大容量是多少？
### 13.6 Redis 如何做大量数据插入？
### 13.7 假如 Redis 里面有 1 亿个 key，其中有 10w 个 key 是以某个固定的已知的前缀开头的，如果将它们全部找出来？
### 13.8 使用 Redis 做过异步队列吗，是如何实现的
### 13.9 Redis 如何实现延时队列
### 13.10 Redis 回收进程如何工作的？
### 13.11 Redis 回收使用的是什么算法？
