# DNS记录和常见攻击
---
---
## 1. 常见的DNS记录类型
常见的DNS记录类型包括但不限于A，AAAA，CNAME，NS，TXT，MX，SOA等，这些记录：
- **A**：A记录也称为**主机记录**，是使用最广泛的DNS记录，**A记录的基本作用就是说明一个域名对应的IP是多少**， 它是域名和IP地址的对应关系，表现形式为 www.lichangan.com 192.168.1.1 这就是一个A记录！A记录除了进行域名IP对应以外，还有一个高级用法，**可以作为低成本的负载均衡的解决方案**，比如说，www.lichangan.com 可以创建多个A记录，对应多台物理服务器的IP地址，可以实现基本的流量均衡
- **AAAA**：与A记录一样是主机记录，只不过AAAA记录解析的是IPv6地址
- **PTR**： PTR记录是**A记录的逆向记录**，又称做IP反查记录或指针记录，负责将IP反向解析为域名
- **CNAME**：又叫**别名记录**，顾名思义，别名系统可以用域名为b.com的网站被解析到a.com的网站上。这样A网站实际发布出去的域名是B域名。别名记录使用场景比较多，比如我们对网站做CDN加速的时候，把原先的A系统指向到CDN服务器的域名上。
- **TXT**：TXT记录，可任意填写，可为空。一般做一些验证记录时会使用此项，如：做SPF（反垃圾邮件）记录
- **SRV**： 添加服务记录服务器服务记录时会添加此项，SRV记录了哪台计算机提供了哪个服务。格式为：服务的名字.协议的类型（例如：_example-server._tcp）
- **MX**：全称是**邮件交换记录**，在使用邮件服务器的时候，MX记录是无可或缺的，比如A用户向B用户发送一封邮件，那么他需要向DNS查询B的MX记录，DNS在定位到了B的MX记录后反馈给A用户，然后Ａ用户把邮件投递到B用户的MX记录服务器里
- **NS**：NS记录和SOA记录是任何一个DNS区域都不可或缺的两条记录，NS记录也叫**名称服务器记录**，用于说明这个区域有哪些DNS服务器负责解析，SOA记录说明负责解析的DNS服务器中哪一个是主服务器。因此，任何一个DNS区域都不可能缺少这两条记录。**NS记录，说明了在这个区域里，有多少个服务器来承担解析的任务**
- **SOA**：NS记录说明了有多台服务器在进行解析，但哪一个才是主服务器呢，NS并没有说明，这个就要看SOA记录了，SOA名叫**起始授权机构记录，SOA记录说明了在众多NS记录里那一台才是主要的服务器。**

## 2. 常见的DNS相关网络安全攻击
常见的DNS攻击包括但不限于：泛域名攻击，放大攻击，反射攻击DNS污染等
### 2.1 泛域名攻击
泛域名攻击，即域名被泛解析，是指：利用通配符*(星号)来实现所有的次级域名均指向同一IP地址。而在这个IP上利用程序可以制作N多个二级/N级域名网站，同时这些二级域名被百度收录。域名恶意泛解析则是域名被黑客操作并泛解析到其他服务器上制作许多垃圾页面。这些被恶意泛解析的页面大多数为赌博、足球等恶意非法内容。

 #### 2.1.1 域名被恶意泛解析的危害

1. 对网站的权重和流量有直接性的影响，导致权重降低，流量减少。
2. 恶意信息被收录，被误以为是恶意欺诈性非法网站，不利于网站的用户体验。谁愿意打开一家公司网站后发现这个网站存在有许多非法内容?
3. 大多数恶意泛域名解析是赌博、娱乐类网站页面，严重者会导致K站。这一点对于网站SEO来说是致命。

可见，如果恶意泛解析如果不能及时处理，则会对网站优化及用户体验造成致命的影响。 

#### 2.1.2  如何判断域名被恶意泛解析

通过百度搜索：site:你的域名

例如：site:lichangan.com

注意这里需要site顶级域名，不要带www，否则查询不到。 

#### 2.1.3  域名被恶意泛解析怎么办?

当我们一旦发展自己的域名被恶意泛解析后就要迅速处理，争取将负面影响早一天消除，将损失最小化。

1. 检查域名解析是否被泛解。看到恶意域名泛解析后不要删除泛解析，先修改泛解析(*.xxx.com)到自己的服务器IP上。
2. 修改域名账号密码。域名被恶意解析，肯定是账户密码信息泄露或者DNS域名服务器被攻击，避免再次被修改。(平常也要做好网站安全工作，建议定期修改密码，做好防护)
3. 制作404页面。因为泛解析被修改，之前百度收录的内容用户无法访问，通过404处理降低损失，提高用户体验。
4. 百度站长提交死链。统计百度已收录的恶意二级页面链接地址(可以使用抓取工具提取)，最后制作成一个txt格式的文件上传到网站空间，在百度站长工具里提交给百度处理。 

对于上述的第4条，如果是简单的页面当然可以提供死链接的方式完成，数据量毕竟只有几十条。但是如果对于成熟的网站，一般动辄上千的死链接，这时候就需要二级域名批量提取工具了。大多数云厂商提供了这样的工具。

### 2.2 放大攻击
### 2.3 反射攻击
### 2.4 DNS污染
